<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta charset="UTF-8" />
    <title>Sign Up | QR Solution Platform</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <header class="header">
        <nav>
            <div class="title">
                <h1>Sign Up</h1>
                <p>Create your account for QR Solution Platform.</p>
            </div>
            <ul>
                <li><a href="index.html">‚Üê Back to Home</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="container">
            <div class="box">
                <div class="qr-header">
                    <h2>Create Account</h2>
                </div>
                <form id="signupForm" class="auth-form">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" placeholder="you@example.com" required />

                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" placeholder="Minimum 6 characters" required />

                    <label for="signupConfirm">Confirm Password</label>
                    <input type="password" id="signupConfirm" placeholder="Re-enter password" required />

                    <button type="submit" class="auth-submit">Sign Up</button>
                </form>

                <p class="auth-switch">
                    Already have an account?
                    <a href="login.html">Login here</a>
                </p>
            </div>
        </div>
    </main>

    <div class="footer">
        <p>&copy; 2025 Code Traversal. All rights reserved.</p>
    </div>

    <!-- Firebase SDKs (must be loaded before script.js) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Your main script (contains initFirebase and auth/db variables) -->
    <script src="script.js"></script>

    <script>
        // Make sure Firebase is initialized and 'auth' exists in script.js
        const signupForm = document.getElementById("signupForm");
        const emailInput = document.getElementById("signupEmail");
        const passInput = document.getElementById("signupPassword");
        const confirmInput = document.getElementById("signupConfirm");

        signupForm.addEventListener("submit", async (e) => {
            e.preventDefault();
            const email = emailInput.value.trim();
            const password = passInput.value;
            const confirm = confirmInput.value;

            if (!email || !password || !confirm) {
                alert("Please fill all fields.");
                return;
            }
            if (password.length < 6) {
                alert("Password must be at least 6 characters.");
                return;
            }
            if (password !== confirm) {
                alert("Passwords do not match.");
                return;
            }
            if (!window.auth) {
                alert("Firebase not initialized. Please check your configuration.");
                return;
            }

            try {
                await auth.createUserWithEmailAndPassword(email, password);
                alert("Account created successfully. You are now logged in.");
                window.location.href = "index.html";
            } catch (err) {
                console.error(err);
                alert(err.message || "Error while creating account.");
            }
        });
    </script>
</body>
</html>
